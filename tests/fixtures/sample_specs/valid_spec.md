# 機能仕様: テスト用有効なspec.md

## 概要

これはspec.md最小限抽出機能のテスト用サンプルファイルです。

## 前提条件

- Python 3.11+が利用可能であること
- spec-kitプロジェクトが初期化されていること（`.specify/`ディレクトリが存在）
- テストデータとして使用できる有効なspec.mdファイル

## ユーザーストーリー

### ユーザーストーリー1: ドキュメント初期化 (優先度: P1) 🎯 MVP

**目的**: spec-kitユーザーが、単一コマンドでドキュメントプロジェクトを初期化し、手動でディレクトリを作成したり設定ファイルを編集したりすることなく、プロジェクトに適したドキュメント基盤を確立できるようにします。

**この優先度の理由**: ドキュメント生成の前提条件です。

**独立テスト**: ユーザーがspec-kitプロジェクトで`/speckit.doc-init --type sphinx`を実行します。

**受け入れシナリオ**:

1. **前提条件**: 有効なspec-kitプロジェクト、**実行**: ユーザーが`/speckit.doc-init --type sphinx`を実行、**期待結果**: システムが対話的にプロジェクト名、著者名、バージョンを尋ね、`docs/`にSphinxプロジェクトを作成

### ユーザーストーリー2: spec.md最小限抽出 (優先度: P1) 🎯 MVP

**目的**: ドキュメントプロジェクトを初期化したspec-kitユーザーが、spec.mdから必要な情報のみを抽出し、Clarificationsセクション（600行以上の技術的Q&A）を除外することで、エンドユーザー向けドキュメントの品質を改善できるようにします。

**この優先度の理由**: Clarificationsセクションがエンドユーザー向けドキュメントに出力される問題を解決します。

**独立テスト**: 有効なspec.mdから抽出し、約4,500トークン（10,000トークン以内）のコンテンツが返される。

**受け入れシナリオ**:

1. **前提条件**: 有効なspec.md、**実行**: `extract_spec_minimal()`を呼び出し、**期待結果**: ユーザーストーリーの目的、前提条件、スコープ境界のみが抽出される

## スコープ境界

### スコープ内（フェーズ1 - MVP）

- spec.md最小限抽出機能の実装
- ユーザーストーリーの目的、前提条件、スコープ境界の抽出
- トークン数制限（最大10,000トークン）の検証

### スコープ外（フェーズ1 - MVP）

- Clarificationsセクションの抽出
- Success Criteriaセクションの抽出
- 実装計画（plan.md）の抽出
- タスク一覧（tasks.md）の抽出

## 成功基準

- [ ] spec.mdから必要な情報のみが抽出される
- [ ] Clarificationsセクションが除外される
- [ ] トークン数が10,000トークン以内

## Clarifications

### Q1: どのようにspec.mdを解析しますか？

**A1**: markdown-it-pyを使用したMarkdown ASTパースアプローチを採用します。既存の`MarkdownParser`クラスを再利用し、セクション構造を解析します。

### Q2: トークン数はどのように計算しますか？

**A2**: 既存の`estimate_token_count()`関数を使用します。文字数を4で割った値を推定トークン数とします。
